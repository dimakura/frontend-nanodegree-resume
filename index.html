<!DOCTYPE html>

<!--
This is an HTML document. It contains information about how elements in the website
are arranged. In other words, it describes the layout of a website.

I can't wait to see the resumes you put together!

Cameron Pittman, Udacity Course Developer
-->

<!--
The <head> of a website generally links to important resources the page will
need to load. You'll see a lot of <link>s to CSS files for styles and
<scripts> for JavaScript files to build interactions.
-->
<head>
  <!-- This tells the browser how to read the document. -->
  <meta charset="utf-8">

  <!-- Tells the browser what the title of this page should be. -->
  <title>Resume</title>

  <!-- Load the page styles. -->
  <link href="css/style.css" rel="stylesheet" type="text/css">

  <!--
  jQuery is a common JavaScript library for reading and making changes to the
  Document Object Model (DOM). The DOM is a tree that contains information
  about what is actually visible on a website.

  While HTML is a static document, the browser converts HTML to the
  DOM and the DOM can change. In fact, JavaScript's power comes from
  its ability to manipulate the DOM, which is essentially a JavaScript
  object. When JavaScript makes something interesting happen on a
  website, it's likely the action happened because JavaScript changed
  the DOM. jQuery is fast and easy to use, but it doesn't do anything
  you can't accomplish with vanilla (regular) JavaScript.
  -->
  <script src="js/jQuery.js"></script>

  <!-- More on helper.js in the class -->
  <script src="js/helper.js"></script>

  <!--
  Uncomment the <script> tag below when you're ready to add an interactive
  Google Map to your resume!
  -->
  <!-- <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places"></script> -->

  <meta name="viewport" content="width=device-width">
</head>
<body unresolved>
  <div id="main">
    <div id="header" class="center-content clearfix">
      <ul id="topContacts" class='flex-box'></ul>
    </div>
    <div style='clear: both;'></div>
    <div id="workExperience" class='gray'>
      <h2>Work Experience</h2>
    </div>
    <div id="projects">
      <h2>Projects</h2>
    </div>
    <div id="education" class='gray'>
      <h2>Education</h2>
    </div>
    <div id="mapDiv">
      <h2>Where I've Lived and Worked</h2>
    </div>
    <div id="letsConnect" class='dark-gray'>
      <h2 class='orange center-text'>Let's Connect</h2>
        <ul id="footerContacts" class="flex-box">
      </ul>
    </div>
  </div>

  <script src="js/resumeBuilder.js"></script>

  <script type="text/javascript">
    var dataSubstitution = function(sourceString, value) {
      return sourceString.replace('%data%', value);
    };

    var dataSubstitutions = function(mappings) {
      var result = [];
      for (var i = 0; i < mappings.length; i++) {
        var m = mappings[i];
        if (typeof m === 'string') {
          result.push( m );
        } else {
          result.push( dataSubstitution(m[0], m[1]) );
        }
      }
      return result.join(' ');
    };

    var bio = {
      "name": "Dimitri Kurashvili",
      "role": "Front-End Web Developer",
      "contacts": {
        "mobile": "(+995)555116776",
        "email": "dimakura@gmail.com",
        "github": "dimakura",
        "twitter": "dimakura",
        "location": "Tbilisi, Georgia"
      },
      "welcomeMessage": "Welcome to my personal page!",
      "skills": ["JavaScript","RubyOnRails","HTML","CSS"],
      "biopic": "https://avatars1.githubusercontent.com/u/321926",
      display: function() {
        var contacts = this.contacts;

        var headerHTML = dataSubstitutions([
            [HTMLheaderName, this.name],
            [HTMLheaderRole, this.role],
        ]);

        var contactsHTML = dataSubstitutions([
          [HTMLmobile, contacts.mobile],
          [HTMLemail, contacts.email],
          [HTMLgithub, contacts.github],
          [HTMLtwitter, contacts.twitter],
          [HTMLlocation, contacts.location],
        ]);

        var welcomeHTML = dataSubstitutions([
          [HTMLbioPic, this.biopic],
          [HTMLWelcomeMsg, this.welcomeMessage],
          HTMLskillsStart
        ]);

        var skillsHTML = dataSubstitutions( this.skills.map(function(skill) { return [HTMLskills,skill]; }) );

        $('#header').prepend( $(headerHTML) );
        $('#topContacts').append( $(contactsHTML) );
        $('#header').append( $(welcomeHTML) );
        $('#header').append( $(skillsHTML) );
      }
    };

    var work = {
      "jobs": [{
        "employer": "JSC Telasi",
        "title": "Software Developer",
        "location": "Tbilisi, Georgia",
        "dates": "June 2005 - Present",
        "description": "This is my current job"
      }],
      "display": function() {
        var $job, job, jobHTML;

        for(var i = 0; i < this.jobs.length; i++) {
          job = this.jobs[i];
          $job = $( HTMLworkStart );
          jobHTML = dataSubstitutions([
            [HTMLworkEmployer, job.employer],
            [HTMLworkTitle, job.title],
            [HTMLworkDates, job.dates],
            [HTMLworkLocation, job.location],
            [HTMLworkDescription, job.description],
          ]);
          $job.append( $(jobHTML) );
          $('#workExperience').append( $job );
        }
      }
    };

    var education = {
      "schools": [{
        "name": "Tbilsi State University",
        "location": "Tbilisi, Georgia",
        "degree": "Bachelor",
        "majors": ["Physics"],
        "dates": 2000,
        "url": "http://tsu.edu.ge"
      }, {
        "name": "High Energy Physics Institute",
        "location": "Tbilisi, Georgia",
        "degree": "Masters",
        "majors": ["Physics"],
        "dates": 2002,
        "url": "http://hepi.edu.ge"
      }],
      "onlineCourses": [{
        "title": "Front-End Web Developer Nano Degree",
        "school": "Udacity",
        "date": 2015,
        "url": "http://udacity.com/course/nd001"
      }],
      "display": function() {
        var education = this
          , schools = education.schools
          , courses = education.onlineCourses
          , schoolHTML, school, $school
          , i;

        for(i = 0; i < schools.length; i++) {
          school = schools[i];
          $school = $(HTMLschoolStart);
          schoolHTML = dataSubstitutions([
            [HTMLschoolName, school.name],
            [HTMLschoolDegree, school.degree],
            [HTMLschoolDates, school.dates],
            [HTMLschoolLocation, school.location],
            [HTMLschoolMajor, school.majors.join()],
          ]);
          $school.html( schoolHTML );
          $('#education').append( $school );
        }

        $('#education').append( $(HTMLonlineClasses) );
        for(i = 0; i < courses.length; i++) {
          school = courses[i];
          $school = $(HTMLschoolStart);
          schoolHTML = dataSubstitutions([
            [HTMLonlineTitle, school.title],
            [HTMLonlineSchool, school.school],
            [HTMLonlineDates, school.date],
            [HTMLonlineURL, school.url],
          ]);
          $school.html( schoolHTML );
          $('#education').append( $school );
        }
      }
    };

    bio.display();
    work.display();
    education.display();
  </script>
</body>
</html>
